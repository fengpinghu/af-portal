{%extends "base.html"%}

{%block title%}
  JupyterLab
{%endblock%}

{% block libraries %}
<script type="text/javascript" src="{{ url_for('static', filename='js/jupyterlab.js') }}"></script>
{% endblock %}

{% block content %}
<section>
  <div class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a class="text-decoration-none" href="{{ url_for('home') }}">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">JupyterLab</li>
        </ol>
    </nav>
    <a href="{{ url_for('configure_notebook') }}" class="btn btn-sm btn-primary mb-3">Create notebook</a>
    {% if notebooks %}
    <table class="table table-striped table-bordered">
      <thead class="text-muted">
        <tr>
          <td>Notebook</td>
          <td>Status</td>
          <td>Creation date</td>
          <td>Expiration date</td>
          <td></td>
        </tr>
      </thead>
      <tbody>
        {% for notebook in notebooks %}
        <tr data-url="{{ notebook['url'] }}" data-notebook="{{ notebook['notebook_name'] }}">
          <td class="notebook-name">
            {% if notebook['status']['status'] == "Ready" %}
            <a href="{{ notebook['url'] }}" class="text-decoration-none" target="_blank">{{ notebook['notebook_name']}}</a>
            {% else %}
            {{ notebook['notebook_name'] }}
            {% endif %}
          </td>
          <td class="notebook-status">
            {% if notebook['status']['status'] == 'Ready' %}
            <a href="{{ notebook['url'] }}" class="text-decoration-none" target="_blank">
                {{ notebook['status']['status'] }}
            </a>          
            {% else %}
            {{ notebook['status']['status'] }}
            {% endif %}
          </td>         
          <td>{{ notebook['creation_date'] }}</td>
          <td>{{ notebook['expiration_date'] }}</td>
          <td class="notebook-remove">
            {% if notebook['status']['status'] != 'Removing notebook...' %}
            <a href="#" role="button"><i class="fa-regular fa-trash-can"></i></a>
            {% else %}
            <i class="fa-regular fa-trash-can"></i>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>You currently have no notebooks.</p>
    {% endif %}
  </div>
</section>
{% endblock %}